!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).leaderboard={})}(this,(function(e){"use strict";function n(e,n,t){return e(t={path:n,exports:{},require:function(e,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&t.path)}},t.exports),t.exports}var t=n((function(e){!function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(e,n){return e<<n|e>>>32-n},rotr:function(e,n){return e<<32-n|e>>>n},endian:function(e){if(e.constructor==Number)return 16711935&t.rotl(e,8)|4278255360&t.rotl(e,24);for(var n=0;n<e.length;n++)e[n]=t.endian(e[n]);return e},randomBytes:function(e){for(var n=[];e>0;e--)n.push(Math.floor(256*Math.random()));return n},bytesToWords:function(e){for(var n=[],t=0,r=0;t<e.length;t++,r+=8)n[r>>>5]|=e[t]<<24-r%32;return n},wordsToBytes:function(e){for(var n=[],t=0;t<32*e.length;t+=8)n.push(e[t>>>5]>>>24-t%32&255);return n},bytesToHex:function(e){for(var n=[],t=0;t<e.length;t++)n.push((e[t]>>>4).toString(16)),n.push((15&e[t]).toString(16));return n.join("")},hexToBytes:function(e){for(var n=[],t=0;t<e.length;t+=2)n.push(parseInt(e.substr(t,2),16));return n},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var o=e[r]<<16|e[r+1]<<8|e[r+2],i=0;i<4;i++)8*r+6*i<=8*e.length?t.push(n.charAt(o>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,o=0;r<e.length;o=++r%4)0!=o&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|n.indexOf(e.charAt(r))>>>6-2*o);return t}};e.exports=t}()})),r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var n=[],t=0;t<e.length;t++)n.push(255&e.charCodeAt(t));return n},bytesToString:function(e){for(var n=[],t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]));return n.join("")}}},o=r,i=n((function(e){var n,r,i,s;n=t,r=o.utf8,i=o.bin,(s=function(e,t){var o=n.wordsToBytes(function(e){e.constructor==String?e=r.stringToBytes(e):"undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());var t=n.bytesToWords(e),o=8*e.length,i=[],s=1732584193,a=-271733879,u=-1732584194,c=271733878,f=-1009589776;t[o>>5]|=128<<24-o%32,t[15+(o+64>>>9<<4)]=o;for(var l=0;l<t.length;l+=16){for(var p=s,d=a,h=u,g=c,y=f,b=0;b<80;b++){if(b<16)i[b]=t[l+b];else{var v=i[b-3]^i[b-8]^i[b-14]^i[b-16];i[b]=v<<1|v>>>31}var T=(s<<5|s>>>27)+f+(i[b]>>>0)+(b<20?1518500249+(a&u|~a&c):b<40?1859775393+(a^u^c):b<60?(a&u|a&c|u&c)-1894007588:(a^u^c)-899497514);f=c,c=u,u=a<<30|a>>>2,a=s,s=T}s+=p,a+=d,u+=h,c+=g,f+=y}return[s,a,u,c,f]}(e));return t&&t.asBytes?o:t&&t.asString?i.bytesToString(o):n.bytesToHex(o)})._blocksize=16,s._digestsize=20,e.exports=s}));!async function(){const e=await fetch("/lbcfg.json"),n=await e.json();Object.assign(s,n,{initialized:!0}),a.forEach((({name:e,score:n})=>u(e,n))),a.splice(0),console.log("initialized",s)}();const s={initialized:!1},a=[];async function u(e,n){if(!s.initialized)return console.log("not yet initialized, saving score to send after initialization",{name:e,score:n}),void a.push({name:e,score:n});console.log("reporting score",{name:e,score:n});const t=function(e,n){return i(e+n+s.secret)}(e,n),r=s.leaderboard,o=s.username,u=s.password,c=new Headers;c.append("Authorization","Basic"+btoa(o+":"+u)),c.append("Content-Type","application/json");const f=JSON.stringify({name:e,score:n,checksum:t}),l=await fetch(r,{method:"POST",headers:c,body:f,mode:"cors",cache:"no-cache",credentials:"include"});return await l.json()}e.reportScore=u,Object.defineProperty(e,"__esModule",{value:!0})}));
